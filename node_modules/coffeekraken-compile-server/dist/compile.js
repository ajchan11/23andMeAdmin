'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = compile;

var _js = require('./compile/js');

var _js2 = _interopRequireDefault(_js);

var _sass = require('./compile/sass');

var _sass2 = _interopRequireDefault(_sass);

var _stylus = require('./compile/stylus');

var _stylus2 = _interopRequireDefault(_stylus);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Compile some code
 * @param 		{String} 			code 			The code to compile
 * @param 		{String} 			language 		The language of the code to compile like. (sass,scss,js,javascript,coffee,coffeescript,typescript,ts,stylus,styl)
 * @param 		{Object} 			[options={}] 	Some option to pass to the according compilation package bellow. (sass,scss = node-sass / js,coffee,ts = webpack with loaders / stylus = stylus)
 * @example 		js
 * const compileServer = require('coffeekraken-compile-server');
 * compileServer.compile(myCoolCode, 'js').then((compiledCode) => {
 *  	// do something here...
 * });
 * @author  	Olivier Bossel <olivier.bossel@gmail.com>
 */
function compile(code, language, options = {}) {
	return new Promise((resolve, reject) => {
		switch (language) {
			case 'sass':
			case 'scss':
				resolve((0, _sass2.default)(code, language, options));
				break;
			case 'js':
			case 'javascript':
			case 'coffee':
			case 'coffeescript':
			case 'typescript':
			case 'ts':
				resolve((0, _js2.default)(code, language, options));
				break;
			case 'stylus':
			case 'styl':
				resolve((0, _stylus2.default)(code, language, options));
				break;
			default:
				resolve(code);
				break;
		}
	});
}